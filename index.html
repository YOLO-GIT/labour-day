<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="YOLO-GIT" />
    <meta name="keywords" content="labour day, hari pekerja woi, bruh momentos" />
    <meta name="description" content="Labour Day. Hargai setiap pekerjaan." />
    <meta http-equiv="refresh" content="120" />
    <!-- Add Open Graph tags for better social media sharing -->
    <meta property="og:title" content="Labour Day" />
    <meta property="og:description" content="Labour Day. Hargai setiap pekerjaan." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="" />
    <!-- Other Graph Tags -->
    <meta name="twitter:title" content="Labour Day" />
    <meta name="twitter:description" content="Labour Day. Hargai setiap pekerjaan." />
    <meta name="twitter:image" content="" />
    <meta name="twitter:card" content="Hari Pekerja (Cuti Moment ðŸ¤‘)" />
    <link rel="stylesheet" href="src/output.css">
    <title>What is Labour Day</title>
</head>

<body>
    <!-- Navbar -->
    <nav class="relative top-0 z-50 w-full bg-white border-b border-gray-200 dark:bg-gray-800 dark:border-gray-700">
        <div class="px-3 py-3 lg:px-5 lg:pl-3">
            <div class="flex items-center justify-between">
                <div class="flex items-center justify-start rtl:justify-end">
                    <button data-drawer-target="logo-sidebar" data-drawer-toggle="logo-sidebar"
                        aria-controls="logo-sidebar" type="button"
                        class="inline-flex items-center p-2 text-sm text-gray-500 rounded-lg sm:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600">
                        <span class="sr-only">Open sidebar</span>
                        <svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20"
                            xmlns="http://www.w3.org/2000/svg">
                            <path clip-rule="evenodd" fill-rule="evenodd"
                                d="M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z">
                            </path>
                        </svg>
                    </button>
                    <a href="https://flowbite.com" class="flex ms-2 md:me-24">
                        <img src="https://flowbite.com/docs/images/logo.svg" class="h-8 me-3" alt="FlowBite Logo" />
                        <span
                            class="self-center text-xl font-semibold sm:text-2xl whitespace-nowrap dark:text-white">Flowbite</span>
                    </a>
                </div>
                <div class="flex items-center">
                    <div class="flex items-center ms-3">
                        <a href="#skip">
                            <button type="button" aria-expanded="false" data-dropdown-toggle="dropdown-user">
                                <svg class="w-8 h-8 text-black dark:text-white" data-slot="icon" fill="none"
                                    stroke-width="1.5" stroke="currentColor" viewBox="0 0 24 24"
                                    xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="m12.75 15 3-3m0 0-3-3m3 3h-7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z">
                                    </path>
                                </svg>
                            </button>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="custom-container">
        <canvas width="600" height="338" id="image-sequence"></canvas>
    </div>

    <div id="skip" class="sec">
        And then it will reverse when you scroll backwards past when the bottom of the image hits the center of the
        viewport
    </div>

    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
    <script src="node_modules/flowbite/dist/flowbite.min.js"></script>

    <script>
        // use a script tag or an external JS file
        document.addEventListener("DOMContentLoaded", (event) => {
            gsap.registerPlugin(ScrollTrigger)
            // looking for a non-scrubbing version? https://codepen.io/GreenSock/pen/QWYdgjG

            let frameCount = 350,
                urls = new Array(frameCount).fill().map((o, i) =>
                    `../assets/test_2/frame_${(i+1).toString().padStart(3, '0')}_delay-0.05s.gif`);

            imageSequence({
                urls, // Array of image URLs
                canvas: "#image-sequence", // <canvas> object to draw images to
                clear: true, // only necessary if your images contain transparency
                scrollTrigger: {
                    start: "top center", // start at the very top
                    end: "bottom center", // entire page
                    scrub: true, // important!
                    onUpdate: self => {
                        // When the scrolling animation completes
                        if (self.progress > 0.85) {
                            // Animate the opacity of the image sequence to 0
                            gsap.to("#image-sequence", {
                                opacity: 0
                            });
                        } else if (self.progress < 0.85) {
                            gsap.to("#image-sequence", {
                                opacity: 1
                            });
                        }
                        console.log("progress", self.progress)

                    }
                }
            });

            // Animation to start with opacity 1
            gsap.from("#image-sequence", {
                opacity: 1
            });


            /*
            Helper function that handles scrubbing through a sequence of images, drawing the appropriate one to the
            provided canvas.
            Config object properties:
            - urls [Array]: an Array of image URLs
            - canvas [Canvas]: the <canvas> object to draw to
                - scrollTrigger [Object]: an optional ScrollTrigger configuration object like {trigger: "#trigger",
                start: "top top", end: "+=1000", scrub: true, pin: true}
                - clear [Boolean]: if true, it'll clear out the canvas before drawing each frame (useful if your
                images contain transparency)
                - paused [Boolean]: true if you'd like the returned animation to be paused initially (this isn't
                necessary if you're passing in a ScrollTrigger that's scrubbed, but it is helpful if you just want a
                normal playback animation)
                - fps [Number]: optional frames per second - this determines the duration of the returned animation.
                This doesn't matter if you're using a scrubbed ScrollTrigger. Defaults to 30fps.
                - onUpdate [Function]: optional callback for when the Tween updates (probably not used very often).
                It'll pass two parameters: 1) the index of the image (zero-based), and 2) the Image that was drawn to
                the canvas

                Returns a Tween instance
                */
            function imageSequence(config) {
                let playhead = {
                        frame: 0
                    },
                    canvas = gsap.utils.toArray(config.canvas)[0] || console.warn("canvas not defined"),
                    ctx = canvas.getContext("2d"),
                    curFrame = -1,
                    onUpdate = config.onUpdate,
                    images,
                    updateImage = function () {
                        let frame = Math.round(playhead.frame);
                        if (frame !== curFrame) { // only draw if necessary
                            config.clear && ctx.clearRect(0, 0, canvas.width, canvas.height);
                            ctx.drawImage(images[Math.round(playhead.frame)], 0, 0);
                            curFrame = frame;
                            onUpdate && onUpdate.call(this, frame, images[frame]);
                        }
                    };
                images = config.urls.map((url, i) => {
                    let img = new Image();
                    img.src = url;
                    i || (img.onload = updateImage);
                    return img;
                });
                return gsap.to(playhead, {
                    frame: images.length - 1,
                    ease: "none",
                    onUpdate: updateImage,
                    duration: images.length / (config.fps || 30),
                    paused: !!config.paused,
                    scrollTrigger: config.scrollTrigger
                });
            }
        });
    </script>
</body>

</html>